<div [formGroup]="formGroup" class="cs-content-metadata">
  <ul *ngIf="pageConfig?.fieldsToDisplay" class="fields">
    <div formGroupName="metadata">

      <li *ngFor="let fieldToDisplay of pageConfig.fieldsToDisplay">
        <div [ngSwitch]="fieldToDisplay.displayType">

          <mat-form-field *ngSwitchCase="'autocomplete'">
            <input type="text" matInput [formControlName]="fieldToDisplay.name"
                   [name]="fieldToDisplay.name"
                   [placeholder]="fieldToDisplay.label" [matAutocomplete]="auto">
            <mat-autocomplete #auto="matAutocomplete">
              <mat-option *ngFor="let option of fieldToDisplay.filteredOptions | async "
                          [value]="option">{{option}}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>

          <mat-form-field *ngSwitchCase="'date'">
            <input matInput [formControlName]="fieldToDisplay.name"
                   [name]="fieldToDisplay.name"
                   [placeholder]="fieldToDisplay.label" [matDatepicker]="picker">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>

          <mat-form-field *ngSwitchCase="'checkbox'">
            <app-checkbox-input
              [fieldConfig]="fieldToDisplay"
              [formControlName]="fieldToDisplay.name"
              [placeholder]="fieldToDisplay.label"
            ></app-checkbox-input>
          </mat-form-field>

          <mat-form-field *ngSwitchCase="'student-autocomplete'">
            <app-student-autocomplete
              [formControlName]="fieldToDisplay.name"
              [placeholder]="fieldToDisplay.label"
            ></app-student-autocomplete>

          </mat-form-field>

          <mat-form-field *ngSwitchDefault>
            <input matInput [formControlName]="fieldToDisplay.name"
                   [name]="fieldToDisplay.name"
                   [placeholder]="fieldToDisplay.label">
          </mat-form-field>
        </div>
      </li>
    </div>
  </ul>
</div>
